## 7.1 查找的基本概念

1. 查找

    在数据集合中寻找满足某种条件的数据的**过程**。

2. 查找表

    一个预言机，能够满足如下操作

    1. 查询某个特定数据是否在表中
    2. 检索满足条件的数据元素的各种属性
    3. 插入一个元素
    4. 删除一个元素

3. 静态查找表

    若只涉及查找表中1和2操作，则称为静态查找表。

4. 关键字

    唯一标识该元素的某个数据项的值。

5. 平均查找长度

    一次查找的长度是指比较的关键字次数，平均查找长度是指所有查找过程中查找长度的平均值

    $$
    \mathrm{ASL} = \sum_{i=1}^{n}{P_iC_i}
    $$

    $n$为表长，$P_i$为查找第$i$个元素概率，$C_i$为其查找长度，一般都是$P_i=1/n$，即概率相等，此时$\mathrm{ASL} = \frac{\sum_{i=1}^{n}{C_i}}{n}$

## 7.2 顺序查找和折半查找

1. 一般线性表的顺序查找

    从线性表一端开始，逐个检查关键字是否满足条件。

    此时查找第i个元素需要进行$n-i+1$次比较。所以查找成功时，平均查找长度为

    $$
    \mathrm{ASL} = \sum_{i=1}^{n}{P_i(n-i+1)}
    $$

    当概率相等时有$\mathrm{ASL} = (n+1)/2$，而查找不成功需要遍历整个表，即$\mathrm{ASL}_{fail} = n+1$

    **优点**：对数据元素的存储无要求，对有序性也无要求。
    **缺点**：平均查找长度较大，效率低

2. 有序表的顺序查找

    如果存储时是有序的，此时当发现第i个元素小于key，但第i+1个元素大于key时即可返回失败。

    此时我们可以将失败的区间作为一个**失败结点**，链接到第i个结点的左孩子中，下一结点作为右孩子进行连接。此时成功时的平均查找长度不变，而查找不成功的平均查找长度为

    $$
    \mathrm{ASL}_{fail} = \sum_{i=1}^{n}{q_i(l_i-1)} = \frac{1+2+\cdots+n+n}{n+1} = \frac{n}{2}+\frac{n}{n+1}
    $$

    其中$q_i$代表到达第$i$个结点失败的概率，相等查找概率时$q_i=1/(n+1)$，$l_i$代表第i个失败结点所在层数（即位置）。

    **注意**：最后一个结点左右孩子都为失败结点，所以会有两个n。

3. 折半查找（二分）

    适用于有序顺序表。
    就是每次和中间比较，然后可以排除一般，注意比较的时候是大于还是大于等于就行（小于同理），如果带上等于则mid元素不能直接舍弃。

    此时成功时的平均查找长度为

    $$
    \mathrm{ASL} = \frac{1}{n}\sum_{i=1}^{n}{l_i} = \frac{1}{n}(1\times1 + 2\times2 + \cdots + h\times2^{h-1}) \\= \frac{n+1}{n}\log_2{(n+1)}-1\approx \log_2{(n+1)}-1
    $$

    即时间复杂度为$O(log_2n)$，同时查找不成功的平均查找长度即为失败结点的层数之和除以失败结点数。

    **注意**：二分需要随机存取，不适用于链表。

4. 分块查找（索引顺序查找）

    将查找表分为若干块，块内可以无须，快间有序，需保证第i个快最大元素小于第i+1快最小元素。此时将每块最大元素再建立一个索引表。

    查找时先顺序或二分从索引表中找，然后再到具体块内寻找。此时成功时平均查找长度为

    $$
    \mathrm{ASL} = L_I + L_S
    $$

    其中$L_I$代表索引表长度，$L_S$代表每块长度。若将长度为n的顺序表分为b块，每块s个元素，在等概率情况下若采用顺序查找，则平均查找长度为

    $$
    \mathrm{ASL} = L_I + L_S = \frac{b+1}{2} + \frac{s+1}{2} = \frac{s^2+2s+n}{2s}
    $$

    取$s=\sqrt{n}$时，有最小值$\mathrm{ASL}=\sqrt{n}+1$。
